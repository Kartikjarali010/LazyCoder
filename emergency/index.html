<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hospital Bed Availability</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .card-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .card {
      background-color: #007bff;
      color: white;
      border-radius: 10px;
      width: 300px;
      padding: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }

    .card:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 8px;
    }

    .card h2 {
      margin-top: 15px;
      font-size: 24px;
      color: #fff;
    }

    .card p {
      font-size: 16px;
      color: #ddd;
      margin: 5px 0;
    }

    .available-beds {
      font-weight: bold;
      color: #4CAF50;
    }

    .predicted-beds {
      font-style: italic;
      color: #ff9800;
    }
  </style>
</head>
<body>

  <h1>Hospital Bed Availability</h1>

  <div class="card-container" id="hospitalCards">
    <!-- Cards will be populated via JavaScript -->
  </div>

  <script>
    // Sample hospital data including image URLs and historical bed usage data
    const hospitals = [
      { 
        name: 'City Hospital', 
        location: 'New York', 
        availableBeds: 50, 
        image: '/assets/apollo.png',
        historicalBeds: [60, 55, 53, 50, 48]
      },
      { 
        name: 'Mercy Hospital', 
        location: 'Los Angeles', 
        availableBeds: 30, 
        image: '/assets/fortis.png',
        historicalBeds: [35, 32, 30, 28, 27]
      },
      { 
        name: 'General Hospital', 
        location: 'Chicago', 
        availableBeds: 40, 
        image: '/assets/jipmer.png',
        historicalBeds: [45, 42, 40, 38, 35]
      },
      { 
        name: 'Saint Mary Hospital', 
        location: 'Miami', 
        availableBeds: 20, 
        image: '/assets/tata.png',
        historicalBeds: [25, 23, 21, 20, 18]
      },
      { 
        name: 'Hope Hospital', 
        location: 'Dallas', 
        availableBeds: 60, 
        image: '/assets/manipal.png',
        historicalBeds: [70, 65, 69, 60, 58]
      }
    ];

    function sortHospitalsByBeds(hospitals) {
      return hospitals.sort((a, b) => b.availableBeds - a.availableBeds);
    }

    function predictFutureBeds(historicalBeds) {
      const len = historicalBeds.length;
      
      let weightedSum = 0;
      let totalWeight = 0;
      for (let i = 0; i < len; i++) {
        const weight = len - i;
        weightedSum += historicalBeds[i] * weight;
        totalWeight += weight;
      }
      let predictedBeds = Math.floor(weightedSum / totalWeight);

      const randomness = (Math.random() * 0.2 - 0.1);
      predictedBeds = Math.floor(predictedBeds * (1 + randomness));

      return Math.max(predictedBeds, 0);
    }

    function populateCards(hospitals) {
      const cardContainer = document.getElementById('hospitalCards');
      cardContainer.innerHTML = '';

      hospitals.forEach(hospital => {
        const card = document.createElement('div');
        card.className = 'card';
        card.onclick = function() {
          window.location.href = 'emeropd.html';
        };

        const cardContent = `
          <img src="${hospital.image}" alt="${hospital.name}">
          <h2>${hospital.name}</h2>
          <p>Location: ${hospital.location}</p>
          <p class="available-beds">Available Beds: ${hospital.availableBeds}</p>
          <p class="predicted-beds">Predicted Future Beds: ${predictFutureBeds(hospital.historicalBeds)}</p>
        `;

        card.innerHTML = cardContent;
        cardContainer.appendChild(card);
      });
    }

    const sortedHospitals = sortHospitalsByBeds(hospitals);
    populateCards(sortedHospitals);
  </script>

</body>
</html>